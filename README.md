# О проекте

Проект трекера призван облегчить проведение настольных ролевых игр для игроков и ведущего за счёт автоматического отслеживания параметров игровых персонажей и удобного отображения их для всех участников игры. Игрокам благодаря наглядному наличию меток на трекерах проще следить за динамически меняющимися характеристиками, состояниями и параметрами игровых персонажей, ведущему удобнее за счёт небольшого и понятного интерфейса отслеживать общее состояние играющей команды и подстраивать ситуацию за столом в случае необходимости, без дополнительных отвлечений на опрос игроков и использования метагеймовых инструментов, зачастую ломающих атмосферу в НРИ. 

Система трекинга представляет из себя комплекс из четырёх разработанных трекеров, подключённых к ПК ведущего игрока и общающихся с ним посредством разработанного протокола передачи данных. 

![image](https://github.com/user-attachments/assets/f5df1ca1-3983-4fb3-9b97-9d842ed9b9c3)

# Аппаратная часть проекта

Для программирования одного трекера потребуется собрать платформу следующей комплектации:
* Макетная плата (размером 100 мм на 150 мм) и больше
* 36 датчиков герконов
* STM32 NucleoF334
* Кабель micro USB
  
Питание устройства происходит за счёт питания от ПК ведущего игрока (токопотребление в среднем составляет 0.14А)

Необходимо смонтировать следующую электрическую схему

![image](https://github.com/user-attachments/assets/a6db14dc-cdce-4805-a03f-569cfb696c03)
![image](https://github.com/user-attachments/assets/5db6b176-8856-463f-b19b-f2f3e3501450)

Корпус изготавливается отдельно (печать на 3D принтере)

# Структура проекта

## SW

ПО, написанное для микроконтроллера STM32 (C++14, среда STM32CubeIDE версии 1.13.2), опрашивающее матрицу из герконов и отправляющая результаты на ПК.

Диаграмма классов для удобства расширения функционала трекера представлена ниже.

![image](https://github.com/user-attachments/assets/30b86535-813b-4ca4-981d-88e933fade3b)

Микроконтроллер общается с ПК посредством протокола передачи данных следующего вида:

Вид пакета данных, отправляемого от STM32 к ПК

![image](https://github.com/user-attachments/assets/0eb6bc78-3afb-435d-84ee-e12b2886f3f9)


Вид пакета данных, отправляемого от ПК к STM32

![image](https://github.com/user-attachments/assets/9e304ccb-e4fe-4b1e-bb3e-0dfdb8a9dbd3)
![image](https://github.com/user-attachments/assets/c2b83f4e-125d-4db9-afca-472203c04875)

## UI

Программа на Python, реализующая графический интерфейс. Программа состоит из двух страниц - страницы выбора устройства и конфигурации и страницы отображения параметров

![image](https://github.com/user-attachments/assets/d07f95ce-5e36-4038-8c03-91fd2ea56139)
![image](https://github.com/user-attachments/assets/239b5b58-ab05-4b1a-b754-dcb1b4a56b5e)

# Инструкция по запуску

ПО для STM32 необходимо загрузить на собранное устройство трекера.
Программа для ПК написана на языке Python с использованием библиотеки tkinter. После запуска будет предложено выбрать из списка COM портов соответствующий подключенному устройству и файл конфигурации. Пользовательскую конфигурацию можно добавить в соответствующий файл. 
